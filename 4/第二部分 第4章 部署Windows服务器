第二部分  使用命令行管理Windows系统

第4章  部署Windows服务器
第5张  管理Windows系统
第6章  事件记录、追踪与监控
第7章  进程监控与性能维护
第8章  管理事件与性能日志
第9章  计划任务的自动运行

第4章  部署Windows服务器

与Windows Vista相比，使用Windows Server 2008时会有更多的配置选项。本章将详细讲述这些选项，目标是帮助读者使用命令行工具（或命令行工具与图形界面工具的组合）来部署Windows服务器。

4.1服务器配置管理
    使用Windows Server 2008时，在部署新的服务器之前，应该认真规划服务器的体系结构。根据不同服务器的具体需求，对软件配置、硬件配置进行适当的修改。Windows Server 2008的安装可以采用如下两种类型。
    · Full-server安装。这种安装类型提供了全部的功能。这种类型的安装中，可以使用角色、角色服务以及附加软件功能的任意有效组合来配置服务器，并提供了一个全面的用户界面来对服务器进行管理。在部署Windows Server 2008时，如果服务器角色会随时间和实际需求变化，建议选择这种安装模式。
    · Core-server安装。这种安装类型提供了最基本的功能。这种类型的安装中，只可以使用有限的角色，提供的用户界面的功能也是最基本的（用于实现对服务器的本地管理）。如果需要使用专用的服务器来充当特定的服务器角色（或几种角色的组合），也希望降低其他服务带来的负载，建议选择这种安装模式。
    在安装Windows Server 2008时，可以根据需要选择安装类型。要注意的是，尽管你可以使用任何允许使用的远程管理技术来对这两种安装模式进行远程管理，但在本地控制台进行管理时，这两种安装类型是完全不同的。因此，要记住如下一些区别。
    · 进行full-server安装时，有一个完整的用户界面，其中包含了完整的桌面环境（用于从本地控制台对服务器进行管理）。同时，可以使用允许使用的角色、角色服务与功能的任意组合来部署服务器。
    · 进行core-server安装时，仅支持有限的一些角色与角色组合方式。支持的角色包括：活动目录域服务（AD DS）、域名服务（DNS）Server、动态主机配置协议（DHCP）Server、文件服务以及打印服务。此外，在当前的实现中，这种安装模式不提供对服务器应用程序的支持。
    （提示  要安装服务器，可以使用Windows Setup（setup.exe）。安装过程中，在“您想将Windows安装在何处？”页面，你可以通过按Shift+F10键来访问命令提示符。通过这种方法，你可以访问Windows Server 2008标准安装过程中可用的很多类似的命令行工具，包括DiskPart。）
    由于core-server安装只提供最基本的用户界面与有限的桌面环境，其管理方式与full-server安装有较大的差别。最基本的用户界面包括如下几个。
    · Windows登录屏幕，用于用户的登录域注销。
    · 命令提示符，用于通过命令行进行管理。
    · 记事本，用于编辑文件。
    · Regedit命令，用于管理注册表。
    · 任务管理器，用于管理任务与启动新任务。
    启动一台core-server安装的服务器时，可以使用Windows登录屏幕来登录系统（与full-server安装时一样）。在域中，对登录服务器有一些标准的约束机制，具有适当的用户权限与登录许可权限的用户才可以登录服务器。在未充当域控制器的、工作组环境中的服务器上，可以使用NET USER命令来添加用户，使用NET LOCAL GROUP命令来将用户添加到本地组，以便于本地登录。
    登录到core-server模式安装的服务器后，可以操作一个受限的桌面环境与管理员权限的命令提示符。你可以使用该命令提示符来对服务器进行管理，如果无意间关闭了提示符，则可以通过如下步骤来启动一个新的命令提示符。
    （1）按Ctrl+Shift+Esc键，弹出“任务管理器”。
    （2）在“应用程序”选项卡中单击“新任务”。
    （3）在“创建新任务”对话框中，在“打开”行，键入cmd，之后单击“确定”。
    通过与上面类似的步骤，也可以打开其他命令提示符窗口。尽管你可以在上面的步骤（3）中键入notepad.exe或regedit.exe（而非cmd）来分别打开记事本与注册表，但也可以在命令提示符中输入notepad.exe或regedit.exe来分别打开记事本与注册表。
    登录服务器后，可以通过按Ctrl+Alt+Delete键随时显示Windows登录屏幕，core-server安装模式的Windows登录屏幕与full-server安装模式的Windows登录屏幕具有同样的选项，包括锁定计算机、切换用户、注册登录、修改密码、启动任务管理器等。在命令提示符中，可以发现所有用于服务器管理的标准命令与命令行工具。然而，要记住的是，命令、命令行工具与程序的正确运行有一个前提--它们所依赖的组件必须已经安装在系统中。
    尽管core-server安装模式仅支持有限的角色与角色服务，但可以安装大多数功能。然而，例外的情况是，你无法安装那些依赖于微软.NET框架的功能。因为原始的core-server实现不支持.NET框架，因而不能添加Windows PowerShell等功能。随着升级包与服务包的安装，这一限制因素也可能会改变。此外，与任意的full-server安装一样，你也可以通过终端服务远程管理core-server安装方式的服务器。
4.2使用角色、角色服务于功能
    
